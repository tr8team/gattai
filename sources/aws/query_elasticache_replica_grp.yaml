apiVersion: v1
type: CommandLineInterface
spec:
  environment:
    kind: docker
  sub-commands:
    describe-replication-groups:v1:
      command: describe-replication-groups
      args:
        {{ with .identifier }}
        - --replication-group-id {{ . }}
        {{- end }}
        {{ with .query }}
        - --query "ReplicationGroups[0].{{ .query }}"
        {{- end }}
  execute:
    v2.7.20: &latest
      command: aws
      args:
        {{- with .Input }}
        {{- with .region }}
        - --region {{ . }}
        {{- end }}
        - command: elasticache
          args:
            - sub-command: describe-replication-groups:v1
              vars:
                identifier: {{ .identifier }}
                query: {{ .query }}
        {{- end }}

    default: *latest
