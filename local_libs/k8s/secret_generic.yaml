version: v1
type: CommandLineInterface
params:
  name:
    desc: The kube secret name
    requied: true
    type: string
  namespace:
    desc: The kube secret namespace
    requied: true
    type: string
  from-file:
    desc: Create kube secret from file
    requied: false
    type: string
spec:
  test:
    - command: kubectl
      args:
        - get secrets --all-namespaces
  cmds:
    - command: kubectl
      args:
        - create secret generic
        {{- with .Vars }}
        - {{ .name }}
        {{- range $key, $val := .from_literals }}
        - --from-literal={{ $key }}={{ $val }}
        {{- end }}
        {{- with .namespace }}
        - --namespace={{ . }}
        {{- end }}
        {{- with .from_file }}
        - --from-file={{ . }}
        {{- end }}
        {{- with .from_env_file }}
        - --from-env-file={{ . }}
        {{- end }}
        - --dry-run=client -o yaml
        {{- end }}
