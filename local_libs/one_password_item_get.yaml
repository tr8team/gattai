version: v1
type: CommandLineInterface
spec:
  environment:
    kind: docker
  params:
    identifier:
      desc: The one password identifier
      type: string
    label:
      desc:
      type: string
    vault:
      desc:
      type: string
  return: {{ stdout }}
  cmds:
    - cmd:
      {{- with .Params }}
      {{- with .identifier }}
      - op item get {{ . }}
      {{- end }}
      {{- with .label }}
      - --fields label={{ . }}
      {{- end }}
      {{- with .vault }}
      - --vault {{ . }}
      {{- end }}
      {{- end }}
