version: v1
type: CommandLineInterface
params:
  identifier:
    desc: The one password identifier
    requied: true
    type: string
  label:
    desc:
    requied: true
    type: string
  vault:
    desc:
    requied: true
    type: string
return: "stdout"
spec:
  # what is this?Â 
  #environment:
  #  kind: docker
  #  repo:
  #test:
  #  - cmd:
  cmds:
    - cmd: op
      args:
        {{- with .Args }}
        {{- with .identifier }}
        - "item get {{ . }}"
        {{- end }}
        {{- with .label }}
        - "--fields label={{ . }}"
        {{- end }}
        {{- with .vault }}
        - "--vault {{ . }}"
        {{- end }}
        {{- end }}
    - cmd: op
      args:
        {{- with .Args }}
        {{- with .identifier }}
        - "item get \"{{ . }}\""
        {{- end }}
        {{- with .label }}
        - "--fields label={{ . }}"
        {{- end }}
        {{- with .vault }}
        - "--vault {{ . }}"
        {{- end }}
        {{- end }}
