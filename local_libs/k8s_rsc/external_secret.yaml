version: v1
type: CommandLineInterface
params:
  required:
    content:
      desc: The content to be save if any
      type: string
spec:
  exec:
    cmds:
      - command: echo
        args:
          {{- with .Vars }}
          - |
            apiVersion: external-secrets.io/v1beta1
            kind: ExternalSecret
            metadata:
              name: {{ .name }}
            spec:
              refreshInterval: 1h
              secretStoreRef:
                name: secretstore-sample
                kind: SecretStore
              target:
                name: secret-to-be-created
                creationPolicy: Owner
              data:
              - secretKey: secret-key-to-be-managed
                remoteRef:
                  key: provider-key
                  version: provider-key-version
                  property: provider-key-property
              dataFrom:
              - extract:
                  key: remote-key-in-the-provider
          {{- end }}
