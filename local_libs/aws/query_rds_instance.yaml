version: v1
type: CommandLineInterface
params:
  identifier:
    desc: The rds instance identifier
    requied: true
    type: string
  query:
    desc: The rds instance query
    requied: true
    type: string
nix:
  package: aws-cli
  version: v1
spec:
  test:
    - command: aws
      args:
        {{- with .Vars }}
        {{- with .region }}
        - --region {{ . }}
        {{- end }}
        - rds describe-db-instances
        {{- end }}
  cmds:
    - command: aws
      args:
        {{- with .Vars }}
        {{- with .region }}
        - --region {{ . }}
        {{- end }}
        - rds describe-db-instances
        {{- with .identifier }}
        - --db-instance-identifier {{ . }}
        {{- end }}
        {{- with .query }}
        - --query "DBInstances[0].{{ . }}"
        {{- end }}
        {{- end }}
