apiVersion: v1
type: CommandLineInterface
template:
  sub-commands:
    v1.23.5:create:secret:
      command: create
      args:
        - command: secret
          args:
            - generic {{ .NAME }}
            {{- range .LITERALS }}
            - --from-literal={{ . }}
            {{- end }}

    v1.23.5:create:configmap:
      command: create
      args:
        - command: configmap
          args:
            - {{ .NAME }}
            {{- range .LITERALS }}
            - --from-literal={{ . }}
            {{- end }}

  v1.23.5: &latest
    command: kubectl
    args:
      {{- with .Spec.create-secret }}
      - sub-command: v1.23.5:create:secret
        vars: 
          NAME: {{ .name }}
          LITERALS: {{ .literals }}
      {{- end }}
      {{- with .Spec.create-configmap }}
      - sub-command: v1.23.5:create:configmap
        vars: 
          NAME: {{ .name }}
          LITERALS: {{ .literals }}
      {{- end }}
  
  default: *latest