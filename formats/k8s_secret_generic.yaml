apiVersion: v1
type: CommandLineInterface
spec:
  environment:
    kind: shell
  execute:
    v1.23.5: &latest
      command: kubectl
      args:
        - command: create
          args:
            - command: secret
              {{- with .Output }}
              args:
                - generic {{ .name }}
                {{- range $key, $val := .from-literals }}
                - --from-literal={{ $key }}={{ $val }}
                {{- end }}
                {{- with .from-file }}
                - --from-file={{ temp_folder .key }}
                {{- end }}
                {{- with .from-env-file }}
                - --from-env-file={{ temp_folder .key }}
                {{- end }}
                - -o yaml
              {{- end }}

    default: *latest
